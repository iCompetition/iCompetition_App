<!DOCTYPE html>
<html>
<head>
  <!-- Metadata Goes Here -->
  <title>iComp</title>
  <link href="https://www.w3schools.com/w3css/4/w3.css" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/a076d05399.js"></script>
	<link rel="stylesheet" media="screen and (min-device-width: 500px)" type="text/css" href="css/iComp.css">
  <script type="text/javascript" src="js/iComp_sharedVars.js"></script>
  <script type="text/javascript" src="js/iComp_utils.js"></script>  
  <script type="text/javascript" src="js/iComp_cookies.js"></script>
  <script type="text/javascript" src="js/iComp_user.js"></script>
  <script type="text/javascript" src="js/iComp_userMenu.js"></script>
  <script type="text/javascript" src="js/iComp_adm.js"></script>
  
</head>
<body>
<!-- Columns - User Info and Event list -->
  <div class="alert alert-primary alert-dismissible fade show d-none" role="alert" id="dismissibleAlertInfo">
    <strong id="disAlertInfoMes" >Template</strong>
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="alert alert-warning alert-dismissible fade show d-none" role="alert" id="dismissibleAlertWarn">
    <strong id="disAlertWarnMes" >Template</strong>
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="container-fluid" >
    <div class="row" >
      <div id="userBaseInfoDiv" class="col-lg-2 mb-3 border-right border-secondary p-2">
        <table class="userinfotable" >
            <tr>
              <td><b>User:&nbsp;&nbsp;</b></td>
              <td id='um_usertd'>Unknown</td>
            </tr>   
            <tr>
              <td><b>F.Name:&nbsp;&nbsp;</b></td>
              <td id='um_fnametd'>Unknown</td>
            </tr> 
            <tr>
              <td><b>L.Name:&nbsp;&nbsp;</b></td>
              <td id='um_lnametd'>Unknown</td>
            </tr> 
            <tr>
              <td><b>User#:&nbsp;&nbsp;</b></td>
              <td id='um_numtd'>Unknown</td>
            </tr> 
            <tr>
              <td><b>Wins:&nbsp;&nbsp;</b></td>
              <td id='um_wins'>Unknown</td>
            </tr>             
          </table>
          <button type="button" class="mt-2 btn btn-outline-primary btn-sm w-100" onClick="logOut();">Log Out</button>
          <!-- <button type="button" class="mt-2 btn btn-outline-primary btn-sm w-100" data-toggle="modal" data-target="#eventRegModal" onClick="checkForAvaEvents();">Event Registration</button> -->
          <button type="button" class="mt-2 btn btn-outline-primary btn-sm w-100" id='eventRegBut' onClick="checkForAvaEvents();">Event Registration</button>
          <button type="button" class="mt-2 btn btn-outline-primary btn-sm w-100 disabled" id='logScoreBut' data-toggle="modal" data-target="#scoreLoggingModal">Log a Score</button> 
          <button type="button" class="mt-2 btn btn-outline-primary btn-sm w-100" id='accConfigButton' data-toggle="modal" data-target="#acctConfigModal">Account</button> 
      </div>
      <div class="col-lg-10" >
        <div id="eventTableDiv" class="text-center">
          <h2 class="mb-1 p-2 border-bottom border-primary text-light bg-dark">EVENTS</h2>
          <select class="mb-1 float-left" id='eventTypeSelect' onChange="changeEventDisplayType();">
            <option value="act">Active Events</option>
            <option value="fin">Finished Events</option>
          </select>          
        </div>
      </div>      
    </div>
  </div>

  <!--Dialog Modal Event Registration-->
  <div id="eventRegModal" class="modal fade" role="dialog">
    <div class="modal-dialog d-block">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Event Register</h4>
        </div>
        <div class="modal-body d-block">
          <label class="d-block" for="eventSel" ><strong>Events:</strong></label>
          <select class="selectpicker w-100" name="eventSel" id="eventReg_eventSel" onChange="getCarsForEvent();" >
          </select>
          <label class="d-block mt-3"  for="carSel" ><strong>Cars:</strong></label>
          <select class="selectpicker w-100" name="carSel" id="eventReg_carSel" disabled >
          </select>
        </div>
        <div class="modal-footer">
          <div class="col text-center" >
            <button type="button" class="btn btn-outline-primary btn-sm" onClick="registerForEvent();" >Register</button>
            <button type="button" class="btn btn-outline-primary btn-sm" onClick="hideModal('eventRegModal');" >Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--Dialog Modal Event Registration-->

  <!--Dialog Modal acct config-->
  <div id="acctConfigModal" class="modal fade" role="dialog">
    <div class="modal-dialog d-block">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Account Settings</h4>
        </div>
        <div class="modal-body d-block w-50 m-auto">
          <button type="button" id='acctConfigResetPassButton' class="btn btn-outline-primary btn-sm d-block w-100 m-2" onClick="readyPasswordChange();" >Change Password</button>
          <button type="button" id='acctConfigResetEmailButton' class="btn btn-outline-primary btn-sm d-block w-100 m-2" onClick="readyEmailChange();" >Change Email</button>
          <div class="md-form mt-3 mb-4 d-none" id='acctConfigPassChgBoxes' >
            <input type="password" id="passChange_Current" class="form-control validate">
            <label data-error="wrong" data-success="right" for="defaultForm-pass">Your Current Password</label>
            <input type="password" id="passChange_new" class="form-control validate">
            <label data-error="wrong" data-success="right" for="defaultForm-pass">New Password</label>
            <input type="password" id="passChange_new_conf" class="form-control validate">
            <label data-error="wrong" data-success="right" for="defaultForm-pass">Repeat New Password</label>            
          </div>          
          <div class="md-form mt-3 mb-4 d-none" id='acctConfigEmailChgBoxes' >
            <input type="password" id="emailChange_pass" class="form-control validate">
            <label data-error="wrong" data-success="right" for="defaultForm-pass">Your Password</label>
            <input type="email" id="emailChange_new" class="form-control validate">
            <label data-error="wrong" data-success="right" for="defaultForm-pass">New Email</label>
            <input type="email" id="emailChange_new_conf" class="form-control validate">
            <label data-error="wrong" data-success="right" for="defaultForm-pass">Repeat New Email</label>            
          </div>          
        </div>
        <div class="modal-footer">
          <div class="col text-center" >
            <button type="button" id="acctConfig_submitPassButton" class="btn btn-outline-primary btn-sm d-none" onClick="submitPassChg();" >Change Password</button>
            <button type="button" id="acctConfig_submitEmailButton" class="btn btn-outline-primary btn-sm d-none" onClick="submitEmailChg();" >Change Email</button>
            <button type="button" class="btn btn-outline-primary btn-sm w-25" onClick="closeAcctConfigModal();" >Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--Dialog Modal acct config-->
  
  <!--Dialog Modal Score Logging-->
  <div id="scoreLoggingModal" class="modal fade" role="dialog">
    <div class="modal-dialog d-block">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Log a Score</h4>
        </div>
        <div class="alert alert-danger d-none" role="alert" id="alertbox" >
          Template
        </div>        
        <div class="modal-body d-block">
          <label class="d-block" for="eventSel" ><strong>Events:</strong></label>
          <select class="selectpicker w-100" name="eventSel" id="score_eventSel" onChange="getWkSchduleForEvent();" >
            <option>Select Event...</option>
          </select>
          <select class="selectpicker w-100" name="eventSel" id="score_weekSel" onChange="enableScoreInputs();" disabled >
            <option>Select Week...</option>
          </select>
          <input type="number" id="score_position" placeholder="Enter Finish Position" name="uname" required class="form-control w-50 mt-5 mx-auto text-align-center" disabled >
          <input type="number" id="score_points" placeholder="Enter Points Earned" name="uname" required class="form-control w-50 mt-1 mx-auto" disabled >
          <input type="number" id="score_inc" placeholder="Enter Incidents" name="uname" required class="form-control w-50 mt-1 mb-1 mx-auto" disabled >
          <input type="text"   id="score_lap" placeholder="Enter Fastest Lap (0.00.000)" name="uname" required class="form-control w-50 mt-1 mb-5 mx-auto" disabled  pattern="[\d]+\.\d\d\.\d\d\d">
        </div>
        <div class="modal-footer">
          <div class="col text-center" >
            <button type="button" class="btn btn-outline-primary btn-sm" onClick="logScore();" >Log Score</button>
            <button type="button" class="btn btn-outline-primary btn-sm" onClick="hideModal('scoreLoggingModal');" >Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--Dialog Modal Score Logging-->
  
  <!--Dialog Modal Score Modify-->
  <div id="scoreModifyModal" class="modal fade" role="dialog">
    <div class="modal-dialog d-block">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Modify a Score</h4>
        </div>
        <div class="alert alert-danger d-none" role="alert" id="alertbox" >
          Template
        </div>        
        <div class="modal-body d-block">
          <div class='row' >
            <div class='col-sm-2' ><strong>User:</strong></div> <div class='col' ><italic id="ms_userName">Test</italic></div>
          </div>
          <div class='row' >
            <div class='col-sm-2' ><strong>Event:</strong></div> <div class='col' ><italic id="ms_eventTitle">Test</italic></div>
          </div>
          <div class='row' >
            <div div class='col-sm-2' ><strong>Week:</strong></div> <div class='col' ><italic id="ms_weekTitle">Test</italic></div>
          </div>
          <div class='row' >
            <div class='col-sm-2'><strong>Position:</strong></div> <div class='col' ><italic id="ms_curPos">Test</italic></div>
          </div>
          <div class='row' >
            <div class='col-sm-2'><strong>Points:</strong></div> <div class='col' ><italic id="ms_curPnt">Test</italic></div>
          </div>
          <div class='row mb-2' >
            <div class='col-sm-2'><strong>Incidents:</strong></div> <div class='col' ><italic id="ms_curinc">Test</italic></div>
          </div>
          <input type="number" id="ms_position" placeholder="New Position" name="uname" required class="form-control w-50 mt-5 mx-auto text-align-center" disabled >
          <input type="number" id="ms_points" placeholder="New Points" name="uname" required class="form-control w-50 mt-1 mx-auto" disabled >
          <input type="number" id="ms_inc" placeholder="New Incidents" name="uname" required class="form-control w-50 mt-1 mb-5 mx-auto" disabled >
        </div>
        <div class="modal-footer">
          <div class="col text-center" >
            <button type="button" class="btn btn-outline-primary btn-sm" onClick="reqScoreChange();" >Request Change</button>
            <button type="button" class="btn btn-outline-primary btn-sm" onClick="hideModal('scoreModifyModal');" >Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--Dialog Modal Score Modify-->
  
  <!--Dialog Modal Event Details -->
  <div id="eventDetailModal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-xl d-block">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title text-left">Event Details: <i id="evDetailTitle" >EVENT NAME (Dynamic)</i></h4>
        </div>     
        <div class="modal-body d-block text-left">
          <div class="col" >
            <div class="row" >
              <div class="col">
                <strong>Series Name:&nbsp;&nbsp;<i id="evDetailSeries" >SERIES NAME (Dynamic)</i> </strong>
              </div>
              <div class="col">
                <strong class="mr-3" >Results For:</strong>
                <select class="selectpicker w-50" name="eventDetailNameSel" id="eventDetailNameSel" onChange="updateWeeksForDriverSelect();"> </select>
              </div>
            </div>
          </div>
          <div class="container" >
            <div class="row" >
              <div class="col-lg-4 overflow-auto border-right border-primary" >
                <table class="table boarderless mt-1" id="eventDetailRankTable" >
                  <tr>
                    <th>Rank</th>
                    <th>Driver</th>
                    <th>Car</th>
                    <th>Points</th>
                  </tr>
                  <tr>
                    <td>1</td>
                    <td>Sean Matheny</td>
                    <td>SomethingFast</td>
                    <td>1000</td>
                  </tr>
                  <td>2</td>
                    <td>Michael Paparella</td>
                    <td>SomethingFast</td>
                    <td>1000</td>
                  </tr>
                  <td>3</td>
                    <td>Jimmy Deckoff</td>
                    <td>SomethingFast</td>
                    <td>1000</td>
                  </tr>
                </table>
              </div>
              <div class="col-lg-8" >
                <table class="table borderles mt-1" id="eventDetailScheduleTable" >
                  <tr>
                    <th>Week</th>
                    <th>Track</th>
                    <th>Position</th>
                    <th>Points</th>
                    <th>Inc.</th>
                    <th>Fast Lap</th>
                  </tr>
                  <tr>
                    <td>1</td>
                    <td>Lime Rock Park - Classic</td>
                    <td>2</td>
                    <td>104</td>
                    <td>1</td>
                    <td>1</td>
                  </tr>
                  <tr>
                    <td>2</td>
                    <td>Silverstone - Classic</td>
                    <td>2</td>
                    <td>104</td>
                    <td>1</td>                    
                    <td>1</td>                    
                  <tr>
                    <td>3</td>
                    <td>Road Atlanta - Full</td>
                    <td>2</td>
                    <td>104</td>
                    <td>1</td>                    
                    <td>1</td>                    
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <div class="col text-center" >
            <button type="button" class="btn btn-outline-primary btn-sm" onClick="hideModal('eventDetailModal');" >Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--Dialog Modal Event Details -->
  
  <!-- Pass Prompt -->
  <div class="modal fade" id="passPromptModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header text-center">
          <h4 class="modal-title w-100 font-weight-bold">Enter Password</h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body mx-3">
          <div class="md-form mb-4">
            <i class="fas fa-lock prefix grey-text"></i>
            <input type="password" id="passPromptPass" class="form-control validate">
            <label data-error="wrong" data-success="right" for="defaultForm-pass">Your password</label>
          </div>
        </div>
        <div class="modal-footer d-flex justify-content-center">
          <button class="btn btn-outline-primary btn-sm" onClick="openAdmin();">Validate</button>
        </div>
      </div>
    </div>
  </div>
<!-- Pass Prompt -->
<span id='versionTooltip' class="d-inline-block" tabindex="0" data-toggle="tooltip" title="">
  <div class='fixed-bottom m-2' ><a href="./updatelog.html" rel="noopener noreferrer" target="_blank"><i class="fas fa-code-branch"></i></a></div>
</span>
<!--  END OF BODY -->
  <script>
    iCompServerCheck();
    loadUserPage();
    getVersionInfo();
  </script>
</body>
</html>